{"ast":null,"code":"var _jsxFileName = \"/Users/paloma/Desktop/1_vidly/src/components/common/form.js\";\nimport React, { Component } from 'react';\nimport Joi from 'joi-browser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Form extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {},\n      errors: {}\n    };\n\n    this.validate = () => {\n      const options = {\n        abortEarly: false\n      };\n      const {\n        error\n      } = Joi.validate(this.state.data, this.schema, options);\n      if (!error) return null;\n      const errors = {};\n\n      for (let item of error.details) {\n        errors[item.path[0]] = item.message;\n      }\n\n      return errors;\n    };\n\n    this.validateProperty = ({\n      name,\n      value\n    }) => {\n      const obj = {\n        [name]: value\n      };\n      const schema = {\n        [name]: this.schema[name]\n      };\n      const {\n        error\n      } = Joi.validate(obj, schema);\n      return error ? error.details[0].message : null;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const errors = this.validate();\n      this.setState({\n        errors: errors || {}\n      });\n      if (errors) return;\n      this.doSubmit();\n    };\n\n    this.handleChange = ({\n      currentTarget: input\n    }) => {\n      const errors = { ...this.state.errors\n      };\n      const errorMessage = this.validateProperty(input);\n      if (errorMessage) errors[input.name] = errorMessage;else delete errors[input.name];\n      const data = { ...this.state.data\n      };\n      data[input.name] = input.value;\n      this.setState({\n        data,\n        errors\n      });\n    };\n  }\n\n  renderButton(label) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: this.validate(),\n      className: \"btn btn-primary mt-3\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Form;","map":{"version":3,"sources":["/Users/paloma/Desktop/1_vidly/src/components/common/form.js"],"names":["React","Component","Joi","Form","state","data","errors","validate","options","abortEarly","error","schema","item","details","path","message","validateProperty","name","value","obj","handleSubmit","e","preventDefault","setState","doSubmit","handleChange","currentTarget","input","errorMessage","renderButton","label"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,aAAhB;;;AAEA,MAAMC,IAAN,SAAmBF,SAAnB,CAA6B;AAAA;AAAA;AAAA,SACzBG,KADyB,GACjB;AACJC,MAAAA,IAAI,EAAE,EADF;AAEJC,MAAAA,MAAM,EAAE;AAFJ,KADiB;;AAAA,SAMzBC,QANyB,GAMd,MAAM;AACb,YAAMC,OAAO,GAAG;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAhB;AACA,YAAM;AAACC,QAAAA;AAAD,UAAUR,GAAG,CAACK,QAAJ,CAAa,KAAKH,KAAL,CAAWC,IAAxB,EAA8B,KAAKM,MAAnC,EAA2CH,OAA3C,CAAhB;AAED,UAAI,CAACE,KAAL,EAAY,OAAO,IAAP;AAEZ,YAAMJ,MAAM,GAAG,EAAf;;AACA,WAAK,IAAIM,IAAT,IAAiBF,KAAK,CAACG,OAAvB,EAAgC;AAC/BP,QAAAA,MAAM,CAACM,IAAI,CAACE,IAAL,CAAU,CAAV,CAAD,CAAN,GAAuBF,IAAI,CAACG,OAA5B;AACA;;AAED,aAAOT,MAAP;AACF,KAlBwB;;AAAA,SAoBzBU,gBApByB,GAoBN,CAAC;AAACC,MAAAA,IAAD;AAAOC,MAAAA;AAAP,KAAD,KAAmB;AAClC,YAAMC,GAAG,GAAG;AAAC,SAACF,IAAD,GAAQC;AAAT,OAAZ;AACA,YAAMP,MAAM,GAAG;AAAC,SAACM,IAAD,GAAQ,KAAKN,MAAL,CAAYM,IAAZ;AAAT,OAAf;AACA,YAAM;AAACP,QAAAA;AAAD,UAAUR,GAAG,CAACK,QAAJ,CAAaY,GAAb,EAAkBR,MAAlB,CAAhB;AAEA,aAAOD,KAAK,GAAGA,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBE,OAApB,GAA8B,IAA1C;AACH,KA1BwB;;AAAA,SA4BzBK,YA5ByB,GA4BVC,CAAC,IAAI;AAChBA,MAAAA,CAAC,CAACC,cAAF;AAEA,YAAMhB,MAAM,GAAG,KAAKC,QAAL,EAAf;AACA,WAAKgB,QAAL,CAAc;AAACjB,QAAAA,MAAM,EAAEA,MAAM,IAAI;AAAnB,OAAd;AACA,UAAIA,MAAJ,EAAY;AAEZ,WAAKkB,QAAL;AACH,KApCwB;;AAAA,SAsCzBC,YAtCyB,GAsCV,CAAC;AAACC,MAAAA,aAAa,EAAEC;AAAhB,KAAD,KAA4B;AACvC,YAAMrB,MAAM,GAAG,EAAC,GAAG,KAAKF,KAAL,CAAWE;AAAf,OAAf;AACA,YAAMsB,YAAY,GAAG,KAAKZ,gBAAL,CAAsBW,KAAtB,CAArB;AACA,UAAGC,YAAH,EAAiBtB,MAAM,CAACqB,KAAK,CAACV,IAAP,CAAN,GAAqBW,YAArB,CAAjB,KACK,OAAOtB,MAAM,CAACqB,KAAK,CAACV,IAAP,CAAb;AAEL,YAAMZ,IAAI,GAAG,EAAC,GAAG,KAAKD,KAAL,CAAWC;AAAf,OAAb;AACAA,MAAAA,IAAI,CAACsB,KAAK,CAACV,IAAP,CAAJ,GAAmBU,KAAK,CAACT,KAAzB;AACA,WAAKK,QAAL,CAAc;AAAClB,QAAAA,IAAD;AAAOC,QAAAA;AAAP,OAAd;AACH,KA/CwB;AAAA;;AAiDzBuB,EAAAA,YAAY,CAACC,KAAD,EAAQ;AAChB,wBACI;AACI,MAAA,QAAQ,EAAE,KAAKvB,QAAL,EADd;AAEI,MAAA,SAAS,EAAC,sBAFd;AAAA,gBAGEuB;AAHF;AAAA;AAAA;AAAA;AAAA,YADJ;AAMH;;AAxDwB;;AA2D7B,eAAe3B,IAAf","sourcesContent":["import React, { Component } from 'react';\nimport Joi from 'joi-browser';\n\nclass Form extends Component {\n    state = { \n        data: {},\n        errors: {}\n     }\n\n    validate = () => {\n        const options = {abortEarly: false};\n        const {error} = Joi.validate(this.state.data, this.schema, options);\n\n       if (!error) return null;\n\n       const errors = {};\n       for (let item of error.details) {\n        errors[item.path[0]] = item.message;\n       }\n\n       return errors;\n    }\n\n    validateProperty = ({name, value}) => {\n        const obj = {[name]: value};\n        const schema = {[name]: this.schema[name]};\n        const {error} = Joi.validate(obj, schema);\n\n        return error ? error.details[0].message : null;\n    }\n\n    handleSubmit = e => {\n        e.preventDefault();\n\n        const errors = this.validate();\n        this.setState({errors: errors || {}});\n        if (errors) return;\n\n        this.doSubmit();\n    }\n\n    handleChange = ({currentTarget: input}) => {\n        const errors = {...this.state.errors};\n        const errorMessage = this.validateProperty(input);\n        if(errorMessage) errors[input.name] = errorMessage;\n        else delete errors[input.name];\n\n        const data = {...this.state.data};\n        data[input.name] = input.value;\n        this.setState({data, errors});\n    }\n\n    renderButton(label) {\n        return (\n            <button \n                disabled={this.validate()} \n                className=\"btn btn-primary mt-3\"\n            >{label}</button>\n        );\n    }\n}\n \nexport default Form;"]},"metadata":{},"sourceType":"module"}